1. Claude Code: keep per-template `history.jsonl` by default; set `MPS_CLAUDE_CLEAR_HISTORY=1` to start clean.

2. Codex: add a per-template persisted state dir `<userData>/codex-runtime/<configId>/persist/`; sync whitelist files (default: `history.jsonl`) in/out of the temp `CODEX_HOME`, with lock + delta append to avoid concurrent overwrite.
   - `MPS_CODEX_CLEAR_HISTORY=1`: clear persisted history/state (whitelist)
   - `MPS_CODEX_PERSIST_WHITELIST=...`: override the persisted whitelist (comma/semicolon-separated)

3. OpenCode: add a hint in the config editor + docs: a local `./.opencode.json` in your working directory can override the global config.

4. Docs: refresh EN/ZH README and the tool-history retention guide to keep defaults/switches consistent.
