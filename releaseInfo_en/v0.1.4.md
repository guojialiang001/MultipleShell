1. When copying `.claude.json`, keep `history.jsonl` in the template config directory.

2. UI: in the template picker, move "Working directory" to the top.

3. UI: rename the Settings section title to "Close Prompt".

4. Terminal sessions: when the user changes directory, detect it by parsing the prompt and update the session CWD afterwards.

5. Claude Code: keep per-template `history.jsonl` by default; set `MPS_CLAUDE_CLEAR_HISTORY=1` to start clean.

6. Codex: add a per-template persisted state dir `<userData>/codex-runtime/<configId>/persist/`; sync whitelist files (default: `history.jsonl`) in/out of the temp `CODEX_HOME`, with lock + delta append to avoid concurrent overwrite.
   - `MPS_CODEX_CLEAR_HISTORY=1`: clear persisted history/state (whitelist)
   - `MPS_CODEX_PERSIST_WHITELIST=...`: override the persisted whitelist (comma/semicolon-separated)

7. OpenCode: add a hint in the config editor + docs: a local `./.opencode.json` in your working directory can override the global config.

8. Docs: refresh EN/ZH README and the tool-history retention guide to keep defaults/switches consistent.
